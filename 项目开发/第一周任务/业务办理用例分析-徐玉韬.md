| **用例编号：4**                                              |
| ------------------------------------------------------------ |
| l **名称：**订票办理                                                                                                                                                                            l **描述：**需要订票的用户在用户端进行的订票操作                                                                                                                             l **输入：**订票用户的所订的票务信息（包括车次、时间、起发站终止站）以及自身的乘车人个数和乘车人信息。                                                                                                                                                                                                               l **输出：**成功则生成订单信息，失败输出失败提示**。**                                                                                                                   l **参与者：**订票用户，票务管理端                                                                                                                                                    l **用例关系：**本用例需要在用例3-票务查询后方能进行，此外，本用例是用例5-退票管理、用例6-改签办理、用例7-订单管理的前提用例。                                                                                                                                                              l **前置条件：**票务查询过程顺利，订票用户身份合法，所订的车次有余票，订票用户余额足够支付票务费用，订票管理端运行正常。                                                                                                                                                                        l **基本流程：**  1.      订票用户经过用例3-票务查询，查询到所乘车次的票务信息。  2.      订票用户选择对应车次，选择票种。**业务规则#1**  3.      订票用户添加乘车人。**业务规则#2**  4.      订票用户选座（ABCEF）。  5.      票务管理系统为用户调配座位，同时更新票务信息。订票用户确认订单。**业务规则#3**  6.      订票用户支付订单，从该用户余额划去金额，金额流入票务管理端账户。**业务规则#4**                                                                                                                                                                              l **后置条件：**票务管理端实时更新票务信息，订票用户的订单信息及时更新，资金迅速转移。 |

| **用例编号：5**                                              |
| ------------------------------------------------------------ |
| l **名称：**退票办理                                                                                                                                                            l **描述：**已经订完票的用户在此处取消自己的订单，票务管理端返还用户订票费用。                                              l **输入：**订票用户对应想取消的订单信息                                                                                                                       l **输出：**若用户订单信息符合退票条件，票务管理端将作废原有订单，按照退票规定返还对应金额，否则将显示不符合退票条件不予处理。                                                                                                                                                          l **参与者：**订票用户，票务管理端                                                                                                                                                                  l **用例关系：**本用例必须在用例4-订票办理的基础上进行。                                                                                                         l **前置条件：**用户身份合法，当前订单信息合法，当前订单信息符合退票条件，票务管理端运行正常，票务管理端能够进行正常的资金流动。                                                                                                                                                     l **基本流程：**  1.      用户进入订单信息界面选取对应订单，点击退票。**业务规则#2**  2.      票务管理端读取订单信息，根据相关退票规定决定是否许可退票并计算对应金额，将处理结果发送给用户。**业务规则#5**  3.      若订单信息符合退票规定，用户看到自己退票的详细信息，包括票务信息和所退金额，否则看到系统发来的拒绝退票的信息。  4.      用户点击确认退票，之前的订单作废，对应车次票务信息更新，票务管理端返还对应金额**业务规则#6**。                                                                                                                                                                                                l **后置条件：**原有订单立刻作废，票务管理端及时更新票务信息，退票对应金额能迅速转到订票用户的个人账户。 |

| **用例编号：6**                                              |
| ------------------------------------------------------------ |
| l **名称：**改签办理                                                                                                                                                                                 l **描述：**已经完成订票的用户因为车次本身或者是行程安排改变的原因需要更改之前的订单。                                                 l **输入：**用户原先的订票信息和用户新提交的改签信息                                                                                                                   l **输出：**若输入信息符合改签相关规定，系统将更新用户订单，否则提示用户改签失败。                                                        l **参与者：**需要改签的用户，票务管理端。                                                                                                                                   l **用例关系：**本用例必须在用例4-订票办理的基础上进行。                                                                                                               l **前置条件：**用户身份合法，当前订单信息合法，当前订单信息符合改签条件，用户提交的改签信息合法，改签对应车次有余座，若有手续费用户余额足够支付手续费，票务管理端运行正常。                                                                      l **基本流程：**  **1.**     用户进入订单信息界面选取对应订单，点击改签。**业务规则#2**  **2.**     票务管理端读取订单信息，根据订单信息决定是否处理本次改签请求并将处理结果发送给用户。**业务规则#5**  3.      若订单信息符合改签规定，用户将在改签页面选择改签的日期，点击查询并选择要改的车次，重新选择改签的票种。若不符合规定，则系统提示改签请求违反规定不予受理。**业务规则#7**  4.      用户确认改签信息，票务管理系统为用户调配座位，同时更新票务信息。订票用户确认改签订单。**业务规则#1**  5.      如果有相关的手续费以及用户因为修改票种造成的费用，用户将要支付对应订单，用户余额将被划去并流入票务管理端账户。**业务规则#4**                                       l **后置条件：**原有订单信息立刻作废，生成新的改签订单，票务管理端及时更新原车次和改签车次的票务信息，资金流动顺利**。** |

| 业务规则列表                                                 |
| ------------------------------------------------------------ |
| #1 用户所订车次或改签车次的对应票种有余票。                                                                                                                   #2 所选乘车人都应该是合法用户。                                                                                                                                             #3 票务管理系统优先根据用户的座位选择进行排座，多人订票尽量保证座位号是连着的。                                                          #4 用户余额充足。                                                                                                                                                                             #5 退票、改签处理必须优先参考国家发布的临时政策，如疫情期间的火车票政策。                                                                           #6 票务管理端资金充足。                                                                                                                                                                                            #7 用户改签时只能改签符合改签规定的车次。 |